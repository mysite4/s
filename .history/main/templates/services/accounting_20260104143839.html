{% extends "base.html" %}
{% block content %}

<h2>ğŸ’° Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</h2>

<table border="1" width="100%" style="border-collapse: collapse;">
  <thead>
    <tr>
      <th>#</th>
      <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶</th>
      <th>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</th>
      <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
      <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
      <th>Ø·Ø¨Ø§Ø¹Ø©</th>
    </tr>
  </thead>

  <tbody>
    {% for invoice in invoices %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ invoice.appointment.name }}</td>
      <td>{{ invoice.number }}</td>
      <td>{{ invoice.total_amount }}</td>
      <td>{{ invoice.date }}</td>
      <td>
        <button onclick="printInvoice('{{ invoice.id }}')">ğŸ–¨ï¸</button>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- Ù†Ø³Ø®Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
{% for invoice in invoices %}
<div id="print-{{ invoice.id }}" style="display:none">
  <h2>ÙØ§ØªÙˆØ±Ø©</h2>
  <hr>
  <p><strong>Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶:</strong> {{ invoice.appointment.name }}</p>
  <p><strong>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©:</strong> {{ invoice.number }}</p>
  <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong> {{ invoice.total_amount }}</p>
  <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {{ invoice.date }}</p>
</div>
{% endfor %}

<script>
function printInvoice(id) {
  let content = document.getElementById('print-' + id).innerHTML;
  let win = window.open('', '', 'width=600,height=600');
  win.document.write('<html><body>' + content + '</body></html>');
  win.document.close();
  win.print();
}
</script>

{% endblock %}
