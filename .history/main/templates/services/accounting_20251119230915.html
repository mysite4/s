{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

<div class="page-container fade-in">
  <h1 class="page-title">Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ğŸ“Š</h1>
  <p class="page-subtitle">Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø³Ø·</p>

  <canvas id="accountingChart" style="max-width: 800px; margin-top: 30px;"></canvas>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Django
  const accountingItems = [
    {% for item in accounting_items %}
      {
        date: "{{ item.date }}",
        income: {{ item.income }},
        expense: {{ item.expense }}
      }{% if not forloop.last %},{% endif %}
    {% endfor %}
  ];

  const ctx = document.getElementById('accountingChart').getContext('2d');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: accountingItems.map(item => item.date),
      datasets: [
        {
          label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',
          data: accountingItems.map(item => item.income),
          backgroundColor: 'rgba(75, 192, 192, 0.5)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1
        },
        {
          label: 'Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª',
          data: accountingItems.map(item => item.expense),
          backgroundColor: 'rgba(255, 99, 132, 0.5)',
          borderColor: 'rgba(255, 99, 132, 1)',
          borderWidth: 1
        }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>

<style>
.accounting-dashboard {
    padding: 20px;
}

.stats-container {
    display: flex;
    gap: 20px;
    margin-bottom: 40px;
}

.stat-card {
    background: #f4f4f4;
    padding: 15px 25px;
    border-radius: 8px;
    flex: 1;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.chart-container {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
}
</style>

{% endblock %}
