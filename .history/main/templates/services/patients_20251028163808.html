{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

<div class="page-container fade-in">
  <h1 class="page-title">ğŸ§‘â€âš•ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="list">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰</button>
    <button class="tab-btn" data-tab="add">Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯</button>
  </div>

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ -->
  <div class="tab-content" id="list">
    <h2>Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h2>

    <!-- Ø¨Ø­Ø« -->
    <form method="GET" style="margin-bottom:20px; text-align:center;">
      <input type="text" name="q" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶..." value="{{ query }}" style="padding:8px; width:250px; border-radius:5px; border:1px solid #ccc;">
      <button type="submit" class="btn-main">Ø¨Ø­Ø«</button>
    </form>

    <table class="appointments-table" style="margin:0 auto; text-align:center;">
      <thead>
        <tr>
          <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙŠØ¶</th>
          <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
          <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th>
          <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
        {% for patient in patients %}
        <tr>
          <td>{{ patient.name }}</td>
          <td>{{ patient.phone }}</td>
          <td>{{ patient.birth_date }}</td>
          <td>{{ patient.notes }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø±Ø¶Ù‰ Ù…Ø³Ø¬Ù„ÙŠÙ†.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯ -->
  <div class="tab-content" id="add" style="display:none;">
    <h2>Ø¥Ø¶Ø§ÙØ© Ù…Ø±ÙŠØ¶ Ø¬Ø¯ÙŠØ¯</h2>
    <form method="POST" style="max-width:500px; margin:0 auto; text-align:right;">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="btn-main">Ø­ÙØ¸ Ø§Ù„Ù…Ø±ÙŠØ¶</button>
    </form>
  </div>
</div>

<script>
  // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Tabs
  const tabButtons = document.querySelectorAll('.tab-btn');
  const tabContents = document.querySelectorAll('.tab-content');
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      tabButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      tabContents.forEach(c => c.style.display = 'none');
      document.getElementById(btn.getAttribute('data-tab')).style.display = 'block';
    });
  });
</script>
{% endblock %}
