{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

<div class="page-container fade-in">
  <h1 class="page-title">📅 إدارة المواعيد</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="list">قائمة المواعيد</button>
    <button class="tab-btn" data-tab="manage">تعديل أو إلغاء موعد</button>
  </div>

  <!-- محتوى قائمة المواعيد -->
  <div class="tab-content" id="list">
    <h2>المواعيد المحجوزة</h2>
    <table id="appointments-table" class="appointments-table">
      <thead>
        <tr>
          <th>اسم المريض</th>
          <th>التاريخ</th>
          <th>الوقت</th>
          <th>الطبيب</th>
        </tr>
      </thead>
     <tbody>
  {% for appointment in appointments %}
  <tr>
    <td>{{ appointment.name }}</td>
    <td>{{ appointment.date }}</td>
    <td>{{ appointment.time }}</td>
    <td>{{ appointment.doctor.name }}</td>
  </tr>
  {% endfor %}
</tbody>

    </table>
  </div>

  <!-- محتوى التعديل/الحذف -->
  <div class="tab-content" id="manage" style="display:none;">
    <h2>تعديل أو إلغاء موعد</h2>
    <select id="appointment-select">
      {% for appointment in appointments %}
      <option value="{{ appointment.id }}">{{ appointment.name }} - {{ appointment.date }}</option>
      {% endfor %}
    </select>
    <button id="edit-btn" class="btn-alert">تعديل</button>
    <button id="delete-btn" class="btn-secondary">إلغاء</button>
  </div>
</div>

<script>
  // التبديل بين Tabs
  const tabButtons = document.querySelectorAll('.tab-btn');
  const tabContents = document.querySelectorAll('.tab-content');
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      tabButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      tabContents.forEach(c => c.style.display = 'none');
      document.getElementById(btn.getAttribute('data-tab')).style.display = 'block';
    });
  });
</script>
{% endblock %}
